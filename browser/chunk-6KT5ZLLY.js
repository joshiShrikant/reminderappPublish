import{a as ie}from"./chunk-QMD5FI2T.js";import{Aa as J,Ba as K,Ca as Q,Da as X,E as S,F as l,G as k,H as f,Ha as Y,I as g,Ia as Z,J as c,Ja as $,Ka as ee,N as D,P as E,R as I,T as P,X as V,_ as W,a as h,b as v,ca as A,da as N,ea as O,f as s,fa as F,g as p,ga as x,ha as B,ia as q,j as _,ja as L,k as d,ka as H,l as u,la as j,m as w,ma as U,na as G,p as C,q as R,r,s as n,t as M,y as b,z as T,za as z}from"./chunk-533CXZYH.js";var te=class y{constructor(a,m,e,i){this.reminderService=a;this.route=m;this.router=e;this.http=i;this.reminders=this.reminderService.getReminders()}reminder={id:"",title:"",date:"",time:"",repeat:"once"};save=new C;editMode=!1;reminders=[];formReminder={id:"",title:"",date:"",time:"",repeat:"once"};ngOnInit(){this.route.queryParams.subscribe(a=>{let m=a.id;if(m){let e=this.reminderService.getReminderById(m);console.log(e);let i=this.reminderService.getReminders().find(o=>o.id===m);i&&(this.formReminder=h({},i))}})}ngOnChanges(a){a.reminder&&(this.formReminder=h({},this.reminder))}convertTo24Hr(a){let[m,e]=a.split(" "),[i,o]=m.split(":").map(Number);return e==="PM"&&i<12&&(i+=12),e==="AM"&&i===12&&(i=0),`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}submitForm(){let a=new Date(this.formReminder.date).toISOString().split("T")[0],m=this.convertTo24Hr(this.formReminder.time),e=v(h({},this.formReminder),{date:a,time:m});console.log(this.formReminder),this.formReminder.id&&this.formReminder.id!==""?(this.reminderService.updateReminder(this.formReminder),console.log("Updated Reminder:",this.formReminder)):(this.formReminder.id=this.formReminder.id||Date.now().toString(),this.reminderService.saveReminder(this.formReminder)),this.save.emit(this.formReminder),this.router.navigate(["/viewReminders"]),this.formReminder={id:"",title:"",date:"",time:"",repeat:"once"}}resetForm(){this.formReminder={id:"",title:"",description:"",date:"",time:"",repeat:"once"},this.editMode=!1,this.router.navigate([],{queryParams:{}})}static \u0275fac=function(m){return new(m||y)(u(ie),u(I),u(P),u(E))};static \u0275cmp=w({type:y,selectors:[["app-add-reminder"]],inputs:{reminder:"reminder"},outputs:{save:"save"},features:[_],decls:33,vars:10,consts:[["datePicker",""],["timePicker",""],[1,"form-container",3,"ngSubmit"],["appearance","fill"],["matInput","","name","title","required","",3,"ngModelChange","ngModel"],["matInput","","name","description",3,"ngModelChange","ngModel"],["matInput","","name","date","required","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["matInput","","name","time","required","",3,"ngModelChange","ngxMatTimepicker","ngModel"],["name","repeat",3,"ngModelChange","ngModel"],["value","once"],["value","daily"],["mat-raised-button","","color","primary","type","submit"]],template:function(m,e){if(m&1){let i=b();r(0,"form",2),T("ngSubmit",function(){return s(i),p(e.submitForm())}),r(1,"mat-form-field",3)(2,"mat-label"),l(3,"Title"),n(),r(4,"input",4),c("ngModelChange",function(t){return s(i),g(e.formReminder.title,t)||(e.formReminder.title=t),p(t)}),n()(),r(5,"mat-form-field",3)(6,"mat-label"),l(7,"Description"),n(),r(8,"input",5),c("ngModelChange",function(t){return s(i),g(e.formReminder.description,t)||(e.formReminder.description=t),p(t)}),n()(),r(9,"mat-form-field",3)(10,"mat-label"),l(11,"Date"),n(),r(12,"input",6),c("ngModelChange",function(t){return s(i),g(e.formReminder.date,t)||(e.formReminder.date=t),p(t)}),n(),M(13,"mat-datepicker-toggle",7)(14,"mat-datepicker",null,0),n(),r(16,"mat-form-field",3)(17,"mat-label"),l(18,"Time"),n(),r(19,"input",8),c("ngModelChange",function(t){return s(i),g(e.formReminder.time,t)||(e.formReminder.time=t),p(t)}),n(),M(20,"ngx-mat-timepicker-toggle",7)(21,"ngx-mat-timepicker",null,1),n(),r(23,"mat-form-field",3)(24,"mat-label"),l(25,"Repeat"),n(),r(26,"mat-select",9),c("ngModelChange",function(t){return s(i),g(e.formReminder.repeat,t)||(e.formReminder.repeat=t),p(t)}),r(27,"mat-option",10),l(28,"Once"),n(),r(29,"mat-option",11),l(30,"Daily"),n()()(),r(31,"button",12),l(32),n()()}if(m&2){let i=S(15),o=S(22);d(4),f("ngModel",e.formReminder.title),d(4),f("ngModel",e.formReminder.description),d(4),R("matDatepicker",i),f("ngModel",e.formReminder.date),d(),R("for",i),d(6),R("ngxMatTimepicker",o),f("ngModel",e.formReminder.time),d(),R("for",o),d(6),f("ngModel",e.formReminder.repeat),d(6),k(" ",e.formReminder.id?"Update Reminder":"Save Reminder"," ")}},dependencies:[D,L,B,A,N,O,q,x,F,V,ee,W,G,U,H,j,J,z,K,Q,X,Y,Z,$],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-width:400px;margin:0 auto}"]})};export{te as AddReminder};
